# 第三章 顺序程序设计

## 3.2 数据的表现形式及运算

### 3.2.1 常量和变量

1. 常量  
  在程序运行过程中，其值不能被改变的量，有以下几类：
    1. 整型常量  
      不带小数点的数值是整型常量，但应注意其有效范围。
    2. 实型常量
        - 十进制小数形式，由数字和小数点组成。
        - 指数形式，e或E之前必须有数字。  
      计算机输入输出时，无法表示上角和下角，
      规定以字母e或E表示以10为底的指数，
      e或E之前必须是数字，且后面必须是整数。
    3. 字符常量
        - 普通字符  
      用单撇号括起来的一个字符
        - 转义字符  
      以字符\开头的字符序列
    4. 字符串常量  
      用双撇号括起来的若干个字符
    5. 符号常量  
      用#define指令，指定一个符号名称代表一个常量。  
      使用符号常量的好处：
        - 含义清楚，见明知意；
        - 一改全改。
         符号常量和变量的区别：
        - 符号常量不占内存，在预编译后这个符号就不存在了，故不能对符号常量赋以新值；
        - 为与变量相区别，习惯上符号常量用大写表示。
2. 变量  
  代表一个有名字的、具有特殊属性的存储单元。它用来存放数据，也就是存放变量的值。
    1. 变量必须先定义后使用。
    2. 变量名实际上是以一个名字代表的一个存储地址。
3. 常变量  
  用关键字const修饰的变量，在变量存在期间其值不能改变。
    - 常变量与常量的区别：  
  常变量有类型，占存储单元，只是不允许改变其值；  
  常变量是有名字的不变量，常量时没有名字的不变量。
    - 常变量和符号常量的区别：
        - 定义符号常量用#define指令，它是预编译指令，用来代表一个常量，在预编译时仅是进行常量替换，预编译之后就不存在了。对符号常量的名字是不分配存储单元的。  
        - 常变量占存储单元，有变量值，只是该值不改变。从使用角度看，常变量具有符号常量的优点，而且使用方便。有了常变量以后，可以不必多用符号常量。
4. 标识符  
  用来对变量、符号变量名、函数、数组、类型等命名的有效字符序列统称为标识符 （identifier）  
  只能有字母、数字和下划线3种字符组成，且第1个字符必须为字母或下划线。

### 3.2.2 数据类型

C语言要求在定义变量时都要指定变量的类型。常量也是区分类型的。  
类型，就是对数据分配存储单元的安排，包括存储单元的长度以及数据的存储形式。

- 为什么要指定数据的类型？  
在计算机中，数据是存放在存储单元中的，它是具体存在的，而存储单元是由有限的字节构成，每一个存储单元中存放数据的范围有限，所谓类型，就是对数据分配存储单元，包括存储单元的长度（占多少字节）以及数据的存储形式。
- C语言允许使用的类型：
    1. 基本类型
        - 整型类型
            - 基本整型 （int）
            - 短整型 （short int）
            - 长整型 （long int）
            - 双长整型 （long long int）
            - 字符型 （char）
            - 布尔型 （bool）
        - 浮点类型
            - 单精度浮点型 （float）
            - 双精度浮点型 （double）
            - 复数浮点型 float_complex,double_complex,long long_complex
    2. 枚举类型 enum
    3. 空类型 void
    4. 派生类型
        - 指针类型 *
        - 数组类型 []
        - 结构体类型 （struct）
        - 共用体类型 （union）
        - 函数类型

  其中基本类型和枚举类型变量的值都是数值，统称为算术型（arithmetic type）  
  算术类型和指针类型变量的值是以数字来表示的，统称为纯量类型（scalar type）  
  数组类型和结构体类型统称为组合类型（aggregate type）  
  共用体类型在同一时间内只有一个成员具有值，不属于组合类型；
  函数类型用来定义函数，描述一个函数的接口，包括函数返回值的数据类型和参数的类型。

### 3.2.3 整型数据

1. 整型数据的分类
    1. 基本整型（int）  
      占4个字节。  
      在存储单元中的存储方式是：  
      用整数的补码形式存放。  
      正数的补码是它的二进制真值，  
      负数的补码是其绝对值的补码取反再加1。
    2. 短整型（short）  
      占 2 个字节  
      取值范围： $-2^{15}\sim 2^{15}-1$
    3. 长整型（long）  
      占 4个字节
    4. 双长整型（long long int）  
      占 8 个字节
2. 整型变量的符号属性  
  在类型符号前加修饰符unsigned，表示该变量是“无符号整数”类型，加signed，则是“有符号类型”。  
  有符号类型数据存储单元最高位表示符号，无符号型存储单元中全部位都作存放的数值本身。  
  对无符号整型数据用“%u”格式输出。

### 3.2.4 字符型数据

1. 字符与字符代码  
  字符是以整数形式（字符的ASCII代码）存放在内存单元中的，而所有127个字符的ASCII代码最多用7个二进制位就可以表示，所以在C语言中，指定用1个字节（8位）存储一个字符，此时字节中第1位置为0。
2. 字符变量  
  用类型符char定义，占1个字节，如果在定义变量时既不加signed也不加unsigned，C标准并未规定是按 signed char处理还是按unsigned char处理，由各编译系统决定。把char变量改为unsigned char，即第一位并不固定设为 0，而是把8位都用来存放字符代码，这样可以存放255个字符代码。

### 3.2.5 浮点型数据

  浮点型数据是用来表示具有小数点的实数的。在C语言中，实数是以指数形式存放在存储单元中的。  
  规范化的指数形式：把小数部分中小数点前的数字为0、小数点后第一位数字不为0。

1. float型（单精度浮点型）  
  计算机中用二进制来表示小数部分以及用2的幂次来表示整数部分。在4个字节（32 位）中，有的编译系统以 24 位表示小数部分（包括符号），以8位表示指数部分（包括指数的符号）。
  [IEEE754关于浮点数的取值范围](https://blog.csdn.net/gao_zhennan/article/details/120717424)
    - float型4个字节
    - double型 8个字节
    - long double型 16个字节

### 3.2.6 常量的类型

1. 整型常量
  不带小数点的数值是整型常量，但应注意其取值范围。不同编译系统给整型数据分配的字节数不同，因此，取值范围也不同。  
  在一个整数的末尾加大写字母L或小写字母l，表示它是一个长整型（long int）。
2. 浮点型常量
  凡以小数形式或指数形式出现的实数，是浮点型常量，在内存中以指数形式存储。  
  凡以小数形式或指数形式出现的实数，是浮点型常量，在内存中都以指数形式存储。  
  C程序中的实型常量都是双精度浮点型常量。
  可以在常量的末尾加专用字符，强制指定常量的类型，如F或f表示float型常量。  
  有的C编译系统把所有实数都作为双精度数处理。因此在初始化时把一个双精度常量赋给月份float型变量时，会显示”警告“信息。可以在常量后加”f“标注。

### 3.2.7 运算符和表达式

1. 基本算术运算符  
  除法运算符/中，两个实数相除的结果是双精度实数，如果除数或被除数中有一个为负值，多数 C 编译系统采取“向零取整”的方法。
2. 自增自减运算符  
  前置：先自增（减），再使用。  
  后置：先使用，再自增（减）。
3. 算术表达式和运算符的优先级和结合性  
  用算术运算符和括号将运算对象（也称操作数）连接起来的、符合C语法规则的式子称为C算术表达式。  
  结合性：左结合、右结合
4. 混合运算  
  float和double $\to$ double  
  int、float和double $\to$ double  
  char和整型 $\to$ 整型、char和实型 $\to$ double  
5. 强制类型转换运算符  
  (类型名)(表达式)  
   a=(double)x  
  **注意：x的值和类型都未变化。**
6. C运算符
    - 算术运算符 +、-、*、/、%
    - 关系运算符 >、<、>=、<=、==、!=
    - 逻辑运算符 &&、||、!
    - 赋值运算符 =
    - 位运算符 &、|、~、^、>>、<<
    - 条件运算符 ?:
    - 逗号运算符 ,
    - 指针运算符 *
    - 求字节运算符 sizeof
    - 强制类型转换运算符 ()
    - 成员运算符 .、->
    - 下标运算符 []
    - 其他（如函数调用运算符()）

## 3.3 C语句

### 3.3.1 C语句的作用与分类

语句的作用是向计算机系统发出操作指令，要求执行相应操作。（一个C语句经过编译后产生若干条机器指令。声明部分不是语句，它不产生机器指令，只是对有关数据的声明。）

分类：

1. 控制语句
   - `if()...else...`
   - `for()`
   - `do...while()`
   - `while()`
   - `switch()`
   - `continue`
   - `break`
   - `return`
   - `goto`
2. 函数调用语句
3. 表达式语句
4. 空语句（只有一个分号（;），可以用来作为流程的转向点，也可用作循环语句的循环体）
5. 复合语句（用{}括起来的语句和声明，又称语句块）

### 3.3.2 赋值语句

1. 赋值运算符 =
2. 复合赋值运算符 -= +=
3. 赋值表达式：变量（a）赋值运算符（=）表达式（b+c）右结合性
4. 赋值过程中的类型转换
   - int = float f取整
   - float/double = int 数值不变，以浮点数形式存储
   - float = double 取6～7位有效数字
   - int = char 为字符的ASCII代码
   - short = int 低字节“截断”
5. 赋值表达式和赋值语句
   - 表达式末尾没有分号，语句末尾必须是分号。
6. 变量赋初值
   - 类型 变量 = 值

## 3.4 数据的输入输出

### 3.4.2 有关数据的输入输出的概念

以计算机为主体，C语言不提供输入输出语句，由C语言标准函数库中的函数实现。

### 3.4.3 用printf函数输出数据

1. printf函数的一般形式
   - `printf(格式控制，输出表列)`
   - 格式控制：
     - 格式声明 “%”和格式字符
     - 普通字符 原样输出
   - 输出表列是程序输出的一些数据，可以是常量、变量或表达式
   - printf函数的一般形式：  `printf(参数1，参数2，参数3，...，参数n)`  。参数1必须有，参数2～参数n是可选的
2. 格式字符：
   - `d,i` $\to$  以带符号的十进制形式输出整数
   - `o` $\to$   以八进制无符号形式输出
   - `x,X` $\to$   以十六进制无符号形式输出，a～f/A～F
   - `u` $\to$   以无符号十进制形式
   - `c` $\to$   以字符形式
   - `s` $\to$   以字符串形式
   - `f` $\to$   以小数形式
   - `e,E` $\to$   以指数形式，e/E
   - `g,G` $\to$  用来输出浮点数，系统自动选定f格式或e格式输出，选择其中长度较短的格式，不输出无意义的0。G若以指数形式输出，则指数以大写E表示。
   - `%`   附加字符 格式字符
   - `l`    长整型
   - `m`    最小宽度
   - `n`    n位小数
   - `\`-  域内向左

### 3.4.4 用scanf函数输入数据

1. scanf函数的一般形式
   - `scanf（格式控制，地址表列）`
2. 格式声明：
   - `%` 格式字符
   - `d,i`  $\to$   以带符号的十进制形式输入整数
   - `0`    $\to$   以八进制无符号形式输入
   - `x,X`  $\to$   以十六进制无符号形式输入，a～f/A～F
   - `u`    $\to$   以无符号十进制形式
   - `c`    $\to$   以字符形式
   - `s`    $\to$   以字符串形式
   - `f`    $\to$   以实数形式
   - `e,E` 、 `g,G`  $\to$   e与f作用相同
   - 附加字符：
     - `l`  $\to$   输入长整型
     - `h`  $\to$   输入短整型
     - 域宽  $\to$   指定输入数据所占宽度（列数）
     - `*`  $\to$   读入后不赋给相应变量
3. 使用scanf时应注意的问题：
   - **“格式控制”后是变量地址**
   - “格式控制字符串”中除格式声明外还有其他字符，输入时对应位置应输入相同字符
   - **“%c”输入时，空格和“转义字符”均为有效字符**
   - **数值输入时，空格、回车、tab或其他非法字符则结束**

### 3.4.5 字符数据的输入输出

1. 用putchar函数输出一个字符
   - ` putchar(c) `
2. 用getchar函数输入一个字符
   - `getchar()`
